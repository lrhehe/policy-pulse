/**
 * åäº”äº”è§„åˆ’ (15th Five-Year Plan 2026-2030) æ•°æ®ç»“æ„
 * åŸºäº2025å¹´10æœˆå…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šå»ºè®®ç¨¿
 * ç”¨äºè„‘å›¾å¯è§†åŒ–å’Œæ–°é—»æ ‡ç­¾å…³è”
 */

// äº”å¹´è§„åˆ’ä¸»è¦é¢†åŸŸå’Œå…³é”®è¯æ˜ å°„
const FIVE_YEAR_PLAN = {
    name: "åäº”äº”è§„åˆ’",
    period: "2026-2030",
    theme: "æ–°è´¨ç”Ÿäº§åŠ›ä¸é«˜è´¨é‡å‘å±•",
    subtitle: "å›½æ°‘ç»æµå’Œç¤¾ä¼šå‘å±•ç¬¬åäº”ä¸ªäº”å¹´è§„åˆ’å’Œ2035å¹´è¿œæ™¯ç›®æ ‡çº²è¦",

    // ä¸€çº§åˆ†ç±» - ä¸»è¦æ”¿ç­–é¢†åŸŸ
    categories: [
        {
            id: "new_productivity",
            name: "æ–°è´¨ç”Ÿäº§åŠ›",
            icon: "âš¡",
            color: "#8b5cf6",
            description: "å› åœ°åˆ¶å®œåŸ¹è‚²å’Œå‘å±•æ–°è´¨ç”Ÿäº§åŠ›ï¼Œå¼•é¢†äº§ä¸šå‡çº§",
            keywords: ["æ–°è´¨ç”Ÿäº§åŠ›", "åˆ›æ–°é©±åŠ¨", "ç§‘æŠ€åˆ›æ–°", "é¢ è¦†æ€§æŠ€æœ¯", "å‰æ²¿æŠ€æœ¯", "æœªæ¥äº§ä¸š", "æˆ˜ç•¥æ€§æ–°å…´äº§ä¸š", "äº§ä¸šåˆ›æ–°", "æŠ€æœ¯é©å‘½"],
            subTopics: ["åŸå§‹åˆ›æ–°", "å…³é”®æ ¸å¿ƒæŠ€æœ¯æ”»å…³", "ç§‘æŠ€æˆæœè½¬åŒ–", "åˆ›æ–°ç”Ÿæ€"]
        },
        {
            id: "tech_independence",
            name: "ç§‘æŠ€è‡ªç«‹è‡ªå¼º",
            icon: "ğŸ”¬",
            color: "#06b6d4",
            description: "é«˜æ°´å¹³ç§‘æŠ€è‡ªç«‹è‡ªå¼ºï¼Œçªç ´å…³é”®æ ¸å¿ƒæŠ€æœ¯",
            keywords: ["è‡ªç«‹è‡ªå¼º", "å¡è„–å­", "èŠ¯ç‰‡", "åŠå¯¼ä½“", "é›†æˆç”µè·¯", "é‡å­", "äººå·¥æ™ºèƒ½", "AI", "å¤§æ¨¡å‹", "ç®—åŠ›", "ç ”å‘", "ä¸“åˆ©", "é™¢å£«", "ç§‘å­¦å®¶", "å®éªŒå®¤"],
            subTopics: ["å›½å®¶æˆ˜ç•¥ç§‘æŠ€åŠ›é‡", "åŸºç¡€ç ”ç©¶", "äººæ‰å¼ºå›½", "ç§‘ç ”ä½“åˆ¶æ”¹é©"]
        },
        {
            id: "modern_industry",
            name: "ç°ä»£äº§ä¸šä½“ç³»",
            icon: "ğŸ­",
            color: "#3b82f6",
            description: "å»ºè®¾ä»¥å…ˆè¿›åˆ¶é€ ä¸šä¸ºéª¨å¹²çš„ç°ä»£åŒ–äº§ä¸šä½“ç³»",
            keywords: ["åˆ¶é€ å¼ºå›½", "è´¨é‡å¼ºå›½", "èˆªå¤©å¼ºå›½", "äº¤é€šå¼ºå›½", "ç½‘ç»œå¼ºå›½", "æ™ºèƒ½åˆ¶é€ ", "å·¥ä¸šäº’è”ç½‘", "æœºå™¨äºº", "æ–°èƒ½æºæ±½è½¦", "èˆªç©ºèˆªå¤©", "é«˜ç«¯è£…å¤‡", "äº§ä¸šé“¾", "ä¾›åº”é“¾"],
            subTopics: ["å…ˆè¿›åˆ¶é€ ä¸š", "ä¼ ç»Ÿäº§ä¸šå‡çº§", "äº§ä¸šé“¾ç°ä»£åŒ–", "æ™ºèƒ½åŒ–ä½ç¢³åŒ–è½¬å‹"]
        },
        {
            id: "digital_china",
            name: "æ•°å­—ä¸­å›½",
            icon: "ğŸ’»",
            color: "#0ea5e9",
            description: "æ·±å…¥æ¨è¿›æ•°å­—ä¸­å›½å»ºè®¾",
            keywords: ["æ•°å­—ç»æµ", "æ•°å­—åŒ–", "å¤§æ•°æ®", "äº‘è®¡ç®—", "æ•°å­—æ”¿åºœ", "æ™ºæ…§åŸå¸‚", "æ•°æ®è¦ç´ ", "æ•°æ®å®‰å…¨", "ç½‘ç»œå®‰å…¨", "å¹³å°ç»æµ", "5G", "6G", "ç®—åŠ›ä¸­å¿ƒ"],
            subTopics: ["æ•°å­—äº§ä¸šåŒ–", "äº§ä¸šæ•°å­—åŒ–", "æ•°å­—æ”¿åºœ", "æ•°å­—ç¤¾ä¼š"]
        },
        {
            id: "domestic_demand",
            name: "æ‰©å¤§å†…éœ€",
            icon: "ğŸ›’",
            color: "#f59e0b",
            description: "å»ºè®¾å¼ºå¤§å›½å†…å¸‚åœºï¼Œä¿ƒè¿›æ¶ˆè´¹æŠ•èµ„è‰¯æ€§äº’åŠ¨",
            keywords: ["å†…éœ€", "æ¶ˆè´¹", "æ¶ˆè´¹å‡çº§", "æ‰©å¤§å†…éœ€", "åŒå¾ªç¯", "å†…å¾ªç¯", "æ¶ˆè´¹ä¸­å¿ƒ", "æ–°æ¶ˆè´¹", "å¸‚åœº", "ä¾›éœ€", "æŠ•èµ„"],
            subTopics: ["ä¿ƒè¿›æ¶ˆè´¹", "æ‰©å¤§æŠ•èµ„", "ä¾›éœ€è‰¯æ€§äº’åŠ¨", "æ¶ˆè´¹æ–°æ¨¡å¼"]
        },
        {
            id: "reform",
            name: "æ·±åŒ–æ”¹é©",
            icon: "âš–ï¸",
            color: "#ec4899",
            description: "æ„å»ºé«˜æ°´å¹³ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµä½“åˆ¶",
            keywords: ["æ”¹é©", "ä½“åˆ¶æ”¹é©", "å›½ä¼æ”¹é©", "æ°‘è¥ç»æµ", "è¥å•†ç¯å¢ƒ", "å¸‚åœºåŒ–", "æ³•æ²»åŒ–", "æ”¾ç®¡æœ", "äº§æƒ", "å…¬å¹³ç«äº‰", "åå„æ–­"],
            subTopics: ["ç»æµä½“åˆ¶æ”¹é©", "å›½ä¼æ°‘ä¼å‘å±•", "è¦ç´ å¸‚åœºåŒ–", "è¥å•†ç¯å¢ƒä¼˜åŒ–"]
        },
        {
            id: "opening_up",
            name: "é«˜æ°´å¹³å¼€æ”¾",
            icon: "ğŸŒ",
            color: "#14b8a6",
            description: "æ‰©å¤§é«˜æ°´å¹³å¯¹å¤–å¼€æ”¾",
            keywords: ["å¼€æ”¾", "å¤–è´¸", "è¿›å‡ºå£", "å¤–èµ„", "è‡ªè´¸åŒº", "ä¸€å¸¦ä¸€è·¯", "RCEP", "è·¨å¢ƒç”µå•†", "å…¨çƒåŒ–", "ä¸­éåˆä½œ", "ç²¤æ¸¯æ¾³", "ä¸œç›Ÿ"],
            subTopics: ["è´¸æ˜“æŠ•èµ„è‡ªç”±åŒ–", "è·¨å¢ƒç”µå•†å‘å±•", "å›½é™…ç»è´¸åˆä½œ", "ä¼˜åŒ–å‡ºå£ç»“æ„"]
        },
        {
            id: "regional",
            name: "åŒºåŸŸåè°ƒ",
            icon: "ğŸ—ºï¸",
            color: "#f97316",
            description: "ä¼˜åŒ–åŒºåŸŸç»æµå¸ƒå±€ï¼Œä¿ƒè¿›åè°ƒå‘å±•",
            keywords: ["åŒºåŸŸåè°ƒ", "äº¬æ´¥å†€", "é•¿ä¸‰è§’", "ç²¤æ¸¯æ¾³", "å¤§æ¹¾åŒº", "æˆæ¸", "é•¿æ±Ÿç»æµå¸¦", "é»„æ²³", "è¥¿éƒ¨å¤§å¼€å‘", "ä¸œåŒ—æŒ¯å…´", "ä¸­éƒ¨å´›èµ·", "åŒºåŸŸä¸€ä½“åŒ–"],
            subTopics: ["åŒºåŸŸé‡å¤§æˆ˜ç•¥", "åŸå¸‚ç¾¤å‘å±•", "å¿åŸŸå‘å±•", "åŒºåŸŸåè°ƒæœºåˆ¶"]
        },
        {
            id: "urbanization",
            name: "æ–°å‹åŸé•‡åŒ–",
            icon: "ğŸ™ï¸",
            color: "#a855f7",
            description: "å»ºè®¾å®œå±…éŸ§æ€§æ™ºæ…§åŸå¸‚",
            keywords: ["åŸé•‡åŒ–", "åŸå¸‚ç¾¤", "éƒ½å¸‚åœˆ", "åŸå¸‚æ›´æ–°", "è€æ—§å°åŒº", "åŸå¸‚æ²»ç†", "æ™ºæ…§åŸå¸‚", "éŸ§æ€§åŸå¸‚", "å®œå±…åŸå¸‚", "åœ°ä¸‹ç®¡ç½‘", "åŸä¹¡èåˆ"],
            subTopics: ["å®œå±…éŸ§æ€§æ™ºæ…§åŸå¸‚", "åŸä¹¡èåˆå‘å±•", "å¿åŸŸåŸä¹¡åè°ƒ", "æ–°å‹åŸé•‡åŒ–"]
        },
        {
            id: "rural",
            name: "ä¹¡æ‘æŒ¯å…´",
            icon: "ğŸŒ¾",
            color: "#84cc16",
            description: "å†œä¸šå†œæ‘ç°ä»£åŒ–ï¼Œç¡®ä¿ç²®é£Ÿå®‰å…¨",
            keywords: ["ä¹¡æ‘æŒ¯å…´", "å†œä¸š", "å†œæ‘", "å†œæ°‘", "ä¸‰å†œ", "ç²®é£Ÿå®‰å…¨", "ç§ä¸š", "å†œä¸šç°ä»£åŒ–", "åœŸåœ°", "è€•åœ°", "è„±è´«"],
            subTopics: ["ç²®é£Ÿå®‰å…¨", "å†œä¸šç°ä»£åŒ–", "ä¹¡æ‘å»ºè®¾", "å†œæ°‘å¢æ”¶"]
        },
        {
            id: "green",
            name: "ç¾ä¸½ä¸­å›½",
            icon: "ğŸŒ¿",
            color: "#22c55e",
            description: "æ¨è¿›ç»¿è‰²ä½ç¢³å‘å±•ï¼Œå»ºè®¾ç¾ä¸½ä¸­å›½",
            keywords: ["ç»¿è‰²", "ä½ç¢³", "ç¢³è¾¾å³°", "ç¢³ä¸­å’Œ", "åŒç¢³", "ç”Ÿæ€", "ç¯ä¿", "æ±¡æŸ“", "å‡æ’", "æ–°èƒ½æº", "æ¸…æ´èƒ½æº", "å¯å†ç”Ÿèƒ½æº", "æ°”å€™", "èŠ‚èƒ½", "è’æ¼ åŒ–"],
            subTopics: ["åŒç¢³ç›®æ ‡", "ç»¿è‰²è½¬å‹", "ç”Ÿæ€ä¿®å¤", "æ±¡æŸ“é˜²æ²»"]
        },
        {
            id: "resources",
            name: "èµ„æºå®‰å…¨",
            icon: "â›ï¸",
            color: "#78716c",
            description: "æˆ˜ç•¥æ€§çŸ¿äº§èµ„æºä¿éšœï¼Œå›½åœŸç©ºé—´ä¼˜åŒ–",
            keywords: ["çŸ¿äº§", "ç¨€åœŸ", "é”‚çŸ¿", "èµ„æº", "å›½åœŸ", "æˆ˜ç•¥èµ„æº", "èµ„æºå®‰å…¨", "çŸ¿ä¸š", "èƒ½æºå®‰å…¨"],
            subTopics: ["æˆ˜ç•¥çŸ¿äº§ä¿éšœ", "å›½åœŸç©ºé—´è§„åˆ’", "èµ„æºé«˜æ•ˆåˆ©ç”¨"]
        },
        {
            id: "aging",
            name: "åº”å¯¹è€é¾„åŒ–",
            icon: "ğŸ‘´",
            color: "#64748b",
            description: "ç§¯æåº”å¯¹äººå£è€é¾„åŒ–å›½å®¶æˆ˜ç•¥",
            keywords: ["è€é¾„åŒ–", "å…»è€", "è€å¹´", "äººå£", "ç”Ÿè‚²", "æ‰˜è‚²", "é€‚è€åŒ–", "é“¶å‘ç»æµ", "å…»è€é‡‘", "é€€ä¼‘"],
            subTopics: ["å…»è€æœåŠ¡ä½“ç³»", "é“¶å‘ç»æµ", "æ‰˜è‚²æœåŠ¡", "äººå£å‡è¡¡å‘å±•"]
        },
        {
            id: "education",
            name: "æ•™è‚²å¼ºå›½",
            icon: "ğŸ“š",
            color: "#6366f1",
            description: "å»ºè®¾é«˜è´¨é‡æ•™è‚²ä½“ç³»",
            keywords: ["æ•™è‚²", "å­¦æ ¡", "é«˜æ ¡", "å¤§å­¦", "èŒä¸šæ•™è‚²", "ç´ è´¨æ•™è‚²", "ä¹‰åŠ¡æ•™è‚²", "é«˜ç­‰æ•™è‚²", "æ•™å¸ˆ", "æ‹›ç”Ÿ", "äººæ‰"],
            subTopics: ["åŸºç¡€æ•™è‚²", "èŒä¸šæ•™è‚²", "é«˜ç­‰æ•™è‚²", "ç»ˆèº«å­¦ä¹ "]
        },
        {
            id: "health",
            name: "å¥åº·ä¸­å›½",
            icon: "ğŸ¥",
            color: "#ef4444",
            description: "æ¨è¿›å¥åº·ä¸­å›½å»ºè®¾ï¼Œå®Œå–„åŒ»ç–—æœåŠ¡",
            keywords: ["å¥åº·", "åŒ»ç–—", "åŒ»é™¢", "åŒ»ä¿", "åŒ»æ”¹", "è¯å“", "ä¸­åŒ»è¯", "å…¬å…±å«ç”Ÿ", "ç–¾æ§", "ç–«è‹—", "åŒºåŸŸåŒ»ç–—ä¸­å¿ƒ"],
            subTopics: ["å…¬å…±å«ç”Ÿ", "åŒ»ç–—æœåŠ¡", "åŒ»ä¿æ”¹é©", "ä¸­åŒ»è¯ä¼ æ‰¿"]
        },
        {
            id: "welfare",
            name: "æ°‘ç”Ÿç¦ç¥‰",
            icon: "ğŸ ",
            color: "#f43f5e",
            description: "æé«˜äººæ°‘ç”Ÿæ´»å“è´¨ï¼Œä¿ƒè¿›å…±åŒå¯Œè£•",
            keywords: ["æ°‘ç”Ÿ", "å°±ä¸š", "æ”¶å…¥", "ç¤¾ä¿", "ä½æˆ¿", "ä¿éšœæˆ¿", "å…±åŒå¯Œè£•", "ç¤¾ä¼šä¿éšœ", "å·¥èµ„", "æœ€ä½å·¥èµ„", "å…¬å…±æœåŠ¡"],
            subTopics: ["å°±ä¸šä¼˜å…ˆ", "æ”¶å…¥åˆ†é…", "ç¤¾ä¼šä¿éšœ", "ä½æˆ¿ä¿éšœ"]
        },
        {
            id: "culture",
            name: "æ–‡åŒ–å¼ºå›½",
            icon: "ğŸ­",
            color: "#d946ef",
            description: "æå‡ç¤¾ä¼šæ–‡æ˜ç¨‹åº¦ï¼Œå»ºè®¾æ–‡åŒ–å¼ºå›½",
            keywords: ["æ–‡åŒ–", "æ–‡æ˜", "æ–‡è‰º", "ä¼ åª’", "æ–°é—»", "å‡ºç‰ˆ", "å½±è§†", "æ–‡ç‰©", "éé—", "æ—…æ¸¸", "æ–‡åŒ–äº§ä¸š", "ä½“è‚²"],
            subTopics: ["æ–‡åŒ–äº‹ä¸š", "æ–‡åŒ–äº§ä¸š", "æ–‡æ—…èåˆ", "ç²¾ç¥æ–‡æ˜"]
        },
        {
            id: "security",
            name: "å›½å®¶å®‰å…¨",
            icon: "ğŸ›¡ï¸",
            color: "#475569",
            description: "ç»Ÿç­¹å‘å±•å’Œå®‰å…¨ï¼Œç­‘ç‰¢å®‰å…¨å±éšœ",
            keywords: ["å®‰å…¨", "å›½å®¶å®‰å…¨", "é£é™©", "é˜²èŒƒ", "åº”æ€¥", "ç¾å®³", "é£Ÿå“å®‰å…¨", "å®‰å…¨ç”Ÿäº§", "ç¤¾ä¼šæ²»ç†"],
            subTopics: ["å›½å®¶å®‰å…¨ä½“ç³»", "å…¬å…±å®‰å…¨", "ç¤¾ä¼šæ²»ç†", "åº”æ€¥ç®¡ç†"]
        },
        {
            id: "ocean",
            name: "æµ·æ´‹å¼ºå›½",
            icon: "ğŸŒŠ",
            color: "#0891b2",
            description: "å»ºè®¾æµ·æ´‹å¼ºå›½ï¼Œå‘å±•æµ·æ´‹ç»æµ",
            keywords: ["æµ·æ´‹", "æµ·æ´‹ç»æµ", "æµ·æ´‹å¼ºå›½", "æ¸¯å£", "èˆ¹èˆ¶", "è¿œæ´‹", "æ·±æµ·", "æµ·æ´‹èµ„æº"],
            subTopics: ["æµ·æ´‹ç»æµ", "æµ·æ´‹ç§‘æŠ€", "æµ·æ´‹ç”Ÿæ€", "æµ·æ´‹æƒç›Š"]
        },
        {
            id: "governance",
            name: "å›½å®¶æ²»ç†",
            icon: "ğŸ›ï¸",
            color: "#94a3b8",
            description: "æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–",
            keywords: ["æ²»ç†", "æ³•æ²»", "ç«‹æ³•", "å¸æ³•", "ä¾æ³•æ²»å›½", "ç›‘ç£", "åè…", "çºªæ£€", "å·¡è§†", "å…šå»º", "åˆ¶åº¦", "æ”¹é©ä»»åŠ¡"],
            subTopics: ["æ³•æ²»ä¸­å›½", "åè…å€¡å»‰", "åŸºå±‚æ²»ç†", "å…šçš„å»ºè®¾"]
        }
    ]
};

/**
 * æ ¹æ®æ–°é—»æ ‡é¢˜å’Œå†…å®¹åŒ¹é…äº”å¹´è§„åˆ’åˆ†ç±»
 * @param {string} title - æ–°é—»æ ‡é¢˜
 * @param {string} snippet - æ–°é—»æ‘˜è¦
 * @returns {Array} - åŒ¹é…çš„åˆ†ç±»IDåˆ—è¡¨
 */
function matchPlanCategories(title, snippet = '') {
    const text = (title + ' ' + snippet).toLowerCase();
    const matches = [];

    for (const category of FIVE_YEAR_PLAN.categories) {
        for (const keyword of category.keywords) {
            if (text.includes(keyword.toLowerCase())) {
                if (!matches.find(m => m.id === category.id)) {
                    matches.push({
                        id: category.id,
                        name: category.name,
                        icon: category.icon,
                        color: category.color,
                        matchedKeyword: keyword
                    });
                }
                break; // ä¸€ä¸ªåˆ†ç±»åªåŒ¹é…ä¸€æ¬¡
            }
        }
    }

    return matches;
}

/**
 * ç”Ÿæˆç”¨äº Mermaid è„‘å›¾çš„æ•°æ®ç»“æ„
 * @returns {string} - Mermaid mindmap è¯­æ³•
 */
function generateMindmapMermaid() {
    let mermaid = 'mindmap\n';
    mermaid += '  root((åäº”äº”è§„åˆ’<br/>2026-2030))\n';

    for (const category of FIVE_YEAR_PLAN.categories) {
        mermaid += `    ${category.icon} ${category.name}\n`;
        for (const sub of category.subTopics) {
            mermaid += `      ${sub}\n`;
        }
    }

    return mermaid;
}

module.exports = {
    FIVE_YEAR_PLAN,
    matchPlanCategories,
    generateMindmapMermaid
};
